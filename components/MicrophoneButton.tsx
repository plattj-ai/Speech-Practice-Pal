// components/MicrophoneButton.tsx
import React from 'react';

interface MicrophoneButtonProps {
  isRecording: boolean;
  onToggleRecord: () => void;
  disabled?: boolean;
}

const MicrophoneButton: React.FC<MicrophoneButtonProps> = ({ isRecording, onToggleRecord, disabled }) => {
  const buttonClasses = `
    relative p-4 md:p-6 rounded-full shadow-lg transition-all duration-300 ease-in-out
    focus:outline-none focus:ring-4 focus:ring-opacity-75
    ${isRecording
      ? 'bg-red-500 hover:bg-red-600 focus:ring-red-300'
      : 'bg-green-500 hover:bg-green-600 focus:ring-green-300'}
    ${disabled ? 'opacity-50 cursor-not-allowed' : ''}
  `;

  const pulseClasses = isRecording
    ? 'animate-pulse absolute inset-0 rounded-full bg-red-500 opacity-75'
    : '';

  // New SVG icon for the "Microphone" button, representing sound waves
  // This icon is the same for both states as per the user's latest input,
  // but the button's background color changes to indicate recording status.
  const MicrophoneIcon = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className="h-10 w-10 md:h-12 md:w-12 text-white z-10"
      viewBox="90 56 210 250" // Adjusted viewBox to tightly fit and enlarge the graphic
      fill="currentColor" // Ensures all paths within inherit the text-white color
      aria-hidden="true" // Indicate that this SVG is decorative
    >
      {/* Main microphone/speaker body */}
      <path d="M 181 57.152344 C 160.425781 53.578125 138.660156 59.132812 121.320312 72.507812 C 112.023438 79.59375 90.375 98.863281 90.035156 123.347656 C 90.035156 126.464844 92.46875 129.074219 95.644531 129.074219 L 95.757812 129.074219 C 98.875 129.074219 101.367188 126.578125 101.425781 123.460938 C 101.59375 109.914062 111.683594 94.214844 128.289062 81.40625 C 143.082031 70.015625 161.617188 65.199219 179.128906 68.257812 C 195.792969 71.148438 209.675781 80.613281 219.3125 95.578125 C 241.527344 130.207031 228.832031 148.851562 214.097656 170.445312 C 203.726562 185.691406 191.992188 202.921875 193.808594 226.554688 C 195.167969 244.070312 189.953125 259.371094 178.222656 272.066406 C 164.164062 287.3125 144.726562 294.113281 135.429688 294.113281 C 129.820312 294.113281 125.851562 292.46875 123.414062 289.070312 C 116.445312 279.433594 121.320312 258.011719 123.8125 250.585938 C 124.777344 247.640625 123.1875 244.410156 120.242188 243.445312 C 117.238281 242.480469 114.0625 244.070312 113.101562 247.015625 C 112.023438 250.304688 102.730469 279.660156 114.289062 295.699219 C 117.523438 300.179688 123.8125 305.449219 135.488281 305.449219 C 148.75 305.449219 171.195312 296.4375 186.609375 279.71875 C 200.324219 264.867188 206.785156 246.164062 205.144531 225.648438 C 203.613281 205.980469 213.246094 191.8125 223.507812 176.792969 C 238.355469 155.03125 255.1875 130.320312 228.890625 89.398438 C 217.554688 72.054688 200.609375 60.550781 181 57.152344 Z M 181 57.152344 " />
      {/* Smaller internal shape/dot */}
      <path d="M 167.738281 90.136719 C 189.613281 90.136719 207.410156 107.933594 207.410156 129.808594 C 207.410156 132.925781 209.960938 135.476562 213.078125 135.476562 C 216.195312 135.476562 218.746094 132.925781 218.746094 129.808594 C 218.746094 101.699219 195.847656 78.800781 167.738281 78.800781 C 139.625 78.800781 116.726562 101.699219 116.726562 129.808594 C 116.726562 132.925781 119.277344 135.476562 122.394531 135.476562 C 125.511719 135.476562 128.0625 132.925781 128.0625 129.808594 C 128.0625 127.824219 128.234375 125.898438 128.515625 124.027344 C 128.855469 124.027344 129.195312 124.027344 129.59375 123.972656 C 130.273438 123.800781 138.039062 121.875 147.785156 124.539062 C 139.738281 133.605469 132.992188 149.589844 146.257812 167.273438 C 147.390625 168.746094 149.089844 169.539062 150.789062 169.539062 C 151.980469 169.539062 153.171875 169.199219 154.191406 168.40625 C 156.683594 166.535156 157.195312 162.964844 155.324219 160.472656 C 143.59375 144.828125 154.984375 132.925781 158.839844 129.582031 C 167 134.910156 175.273438 144.320312 181.339844 160.980469 C 182.699219 164.15625 181.679688 167.839844 178.84375 169.878906 C 168.191406 177.757812 151.640625 195.949219 161.105469 229.558594 C 161.785156 232.054688 161.898438 234.207031 161.390625 236.078125 C 161.105469 237.039062 159.007812 239.535156 156.515625 239.703125 C 153.285156 239.988281 149.542969 236.191406 146.144531 229.332031 C 144.726562 226.554688 141.324219 225.367188 138.546875 226.78125 C 135.769531 228.199219 134.636719 231.601562 135.996094 234.375 C 142.742188 247.867188 150.449219 251.039062 156.175781 251.039062 C 156.683594 251.039062 157.25 251.039062 157.703125 250.984375 C 165.015625 250.246094 170.855469 244.351562 172.328125 239.082031 C 173.402344 235.226562 173.289062 230.976562 172.042969 226.5 C 164.847656 200.824219 175.445312 186.484375 185.589844 179.003906 C 192.675781 173.789062 195.222656 164.496094 191.878906 156.789062 C 175.953125 113.03125 145.179688 110.9375 132.371094 112.183594 C 138.886719 99.203125 152.320312 90.25 167.792969 90.25 Z M 167.738281 90.136719 " />
      {/* First sound wave line */}
      <path d="M 264.085938 152.480469 C 260.96875 152.480469 258.417969 155.03125 258.417969 158.148438 C 258.417969 161.265625 260.96875 163.816406 264.085938 163.816406 L 292.425781 163.816406 C 295.542969 163.816406 298.089844 161.265625 298.089844 158.148438 C 298.089844 155.03125 295.542969 152.480469 292.425781 152.480469 Z M 264.085938 152.480469 " />
      {/* Second sound wave line */}
      <path d="M 264.085938 129.808594 C 264.765625 129.808594 265.503906 129.695312 266.183594 129.414062 L 294.519531 118.078125 C 297.410156 116.886719 298.828125 113.601562 297.695312 110.710938 C 296.503906 107.820312 293.21875 106.402344 290.328125 107.535156 L 261.988281 118.871094 C 259.097656 120.0625 257.679688 123.347656 258.816406 126.238281 C 259.722656 128.449219 261.820312 129.808594 264.085938 129.808594 Z M 264.085938 129.808594 " />
      {/* Third sound wave line */}
      <path d="M 294.519531 198.21875 L 266.183594 186.882812 C 263.292969 185.75 260.003906 187.109375 258.816406 190.054688 C 257.625 193.003906 259.042969 196.234375 261.988281 197.425781 L 290.328125 208.757812 C 291.007812 209.042969 291.742188 209.15625 292.425781 209.15625 C 294.691406 209.15625 296.789062 207.796875 297.695312 205.585938 C 298.886719 202.695312 297.46875 199.40625 294.519531 198.21875 Z M 294.519531 198.21875 " />
    </svg>
  );

  return (
    <div className="relative inline-flex items-center justify-center">
      {isRecording && <span className={`${pulseClasses}`} style={{ animationDuration: '1.5s' }}></span>}
      <button
        onClick={onToggleRecord}
        className={buttonClasses}
        disabled={disabled}
        aria-label={isRecording ? "Stop recording" : "Start recording"}
      >
        {MicrophoneIcon}
      </button>
    </div>
  );
};

export default MicrophoneButton;