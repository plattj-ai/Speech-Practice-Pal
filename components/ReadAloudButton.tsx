// components/ReadAloudButton.tsx
import React from 'react';

interface ReadAloudButtonProps {
  isSpeaking: boolean;
  onReadAloud: () => void;
  disabled?: boolean;
}

const ReadAloudButton: React.FC<ReadAloudButtonProps> = ({ isSpeaking, onReadAloud, disabled }) => {
  const buttonClasses = `
    px-8 py-4 rounded-full shadow-lg transition-all duration-300 ease-in-out
    focus:ring-4 focus:ring-opacity-75 focus:outline-none // Keep focus ring for accessibility
    flex flex-col items-center justify-center min-w-[140px] min-h-[90px] md:min-w-[160px] md:min-h-[100px]
    ${isSpeaking
      ? 'bg-blue-500 hover:bg-blue-600 focus:ring-blue-300'
      : 'bg-purple-600 hover:bg-purple-700 focus:ring-purple-400'}
    ${disabled ? 'opacity-50 cursor-not-allowed' : ''}
  `;

  const SpeechIcon = (
    <svg
      xmlns="http://www.w3.org/2000/svg"
      className={`h-8 w-8 md:h-10 md:w-10 text-white ${isSpeaking ? 'animate-pulse' : ''}`}
      viewBox="50 60 280 250"
      fill="currentColor"
      aria-hidden="true" // Icon is decorative, button text provides context
    >
      <path d="M 194.429688 66.195312 C 118.140625 66.195312 56.074219 112.742188 56.074219 169.960938 C 56.074219 197.828125 71.121094 224.566406 97.554688 244.011719 L 90.730469 298.597656 C 90.632812 299.390625 90.640625 300.183594 90.761719 300.972656 C 90.882812 301.761719 91.109375 302.519531 91.4375 303.246094 C 91.769531 303.972656 92.191406 304.640625 92.707031 305.253906 C 93.222656 305.863281 93.808594 306.390625 94.472656 306.835938 C 95.132812 307.285156 95.84375 307.632812 96.601562 307.882812 C 97.359375 308.132812 98.136719 308.273438 98.9375 308.308594 C 99.734375 308.34375 100.523438 308.269531 101.296875 308.085938 C 102.074219 307.902344 102.8125 307.617188 103.511719 307.230469 L 167.472656 271.695312 C 176.40625 273.039062 185.394531 273.714844 194.429688 273.730469 C 270.71875 273.730469 332.789062 227.183594 332.789062 169.960938 C 332.789062 112.742188 270.71875 66.195312 194.429688 66.195312 Z M 194.429688 256.433594 C 185.320312 256.414062 176.269531 255.660156 167.28125 254.164062 C 165.300781 253.839844 163.429688 254.164062 161.671875 255.136719 L 110.003906 283.835938 L 115.359375 241.003906 C 115.457031 240.210938 115.449219 239.421875 115.328125 238.628906 C 115.207031 237.839844 114.980469 237.082031 114.652344 236.355469 C 114.320312 235.628906 113.898438 234.957031 113.382812 234.347656 C 112.867188 233.738281 112.277344 233.210938 111.613281 232.761719 C 86.953125 216.136719 73.367188 193.835938 73.367188 169.960938 C 73.367188 122.28125 127.675781 83.488281 194.429688 83.488281 C 261.1875 83.488281 315.492188 122.28125 315.492188 169.960938 C 315.492188 217.640625 261.1875 256.433594 194.429688 256.433594 Z" />
      <path d="M 151.195312 169.960938 C 151.195312 170.527344 151.167969 171.09375 151.109375 171.65625 C 151.054688 172.21875 150.972656 172.78125 150.863281 173.335938 C 150.75 173.890625 150.613281 174.441406 150.449219 174.980469 C 150.285156 175.523438 150.09375 176.054688 149.878906 176.578125 C 149.660156 177.101562 149.417969 177.613281 149.152344 178.113281 C 148.886719 178.613281 148.59375 179.097656 148.28125 179.570312 C 147.964844 180.039062 147.628906 180.496094 147.269531 180.933594 C 146.910156 181.371094 146.53125 181.789062 146.128906 182.191406 C 145.726562 182.589844 145.308594 182.972656 144.871094 183.332031 C 144.433594 183.691406 143.980469 184.027344 143.507812 184.339844 C 143.039062 184.65625 142.550781 184.945312 142.050781 185.214844 C 141.554688 185.480469 141.042969 185.722656 140.519531 185.941406 C 139.996094 186.15625 139.460938 186.347656 138.921875 186.511719 C 138.378906 186.675781 137.828125 186.8125 137.273438 186.925781 C 136.71875 187.035156 136.160156 187.117188 135.59375 187.171875 C 135.03125 187.226562 134.464844 187.257812 133.898438 187.257812 C 133.332031 187.257812 132.769531 187.226562 132.203125 187.171875 C 131.640625 187.117188 131.082031 187.035156 130.527344 186.925781 C 129.96875 186.8125 129.421875 186.675781 128.878906 186.511719 C 128.335938 186.347656 127.804688 186.15625 127.28125 185.941406 C 126.757812 185.722656 126.246094 185.480469 125.746094 185.214844 C 125.246094 184.945312 124.761719 184.65625 124.292969 184.339844 C 123.820312 184.027344 123.367188 183.691406 122.929688 183.332031 C 122.492188 182.972656 122.070312 182.589844 121.671875 182.191406 C 121.269531 181.789062 120.890625 181.371094 120.53125 180.933594 C 120.171875 180.496094 119.835938 180.039062 119.519531 179.570312 C 119.203125 179.097656 118.914062 178.613281 118.648438 178.113281 C 118.378906 177.613281 118.136719 177.101562 117.921875 176.578125 C 117.703125 176.054688 117.515625 175.523438 117.351562 174.980469 C 117.183594 174.441406 117.046875 173.890625 116.9375 173.335938 C 116.828125 172.78125 116.742188 172.21875 116.6875 171.65625 C 116.632812 171.09375 116.605469 170.527344 116.605469 169.960938 Z" />
      <path d="M 211.726562 169.960938 C 211.726562 170.527344 211.699219 171.09375 211.640625 171.65625 C 211.585938 172.21875 211.503906 172.78125 211.394531 173.335938 C 211.28125 173.890625 211.144531 174.441406 210.980469 174.980469 C 210.816406 175.523438 210.625 176.054688 210.410156 176.578125 C 210.191406 177.101562 209.949219 177.613281 209.683594 178.113281 C 209.417969 178.613281 209.125 179.097656 208.8125 179.570312 C 208.496094 180.039062 208.160156 180.496094 207.800781 180.933594 C 207.441406 181.371094 207.0625 181.789062 206.660156 182.191406 C 206.257812 182.589844 205.839844 182.972656 205.402344 183.332031 C 204.964844 183.691406 204.511719 184.027344 204.039062 184.339844 C 203.570312 184.65625 203.082031 184.945312 202.582031 185.214844 C 202.085938 185.480469 201.574219 185.722656 201.050781 185.941406 C 200.527344 186.15625 199.992188 186.347656 199.453125 186.511719 C 198.910156 186.675781 198.359375 186.8125 197.804688 186.925781 C 197.25 187.035156 196.691406 187.117188 196.125 187.171875 C 195.5625 187.226562 194.996094 187.257812 194.429688 187.257812 C 193.863281 187.257812 193.300781 187.226562 192.734375 187.171875 C 192.171875 187.117188 191.613281 187.035156 191.058594 186.925781 C 190.5 186.8125 189.953125 186.675781 189.410156 186.511719 C 188.867188 186.347656 188.335938 186.15625 187.8125 185.941406 C 187.289062 185.722656 186.777344 185.480469 186.277344 185.214844 C 185.777344 184.945312 185.292969 184.65625 184.824219 184.339844 C 184.351562 184.027344 183.898438 183.691406 183.460938 183.332031 C 183.023438 182.972656 182.601562 182.589844 182.203125 182.191406 C 181.800781 181.789062 181.421875 181.371094 181.0625 180.933594 C 180.703125 180.496094 180.367188 180.039062 180.050781 179.570312 C 179.738281 179.097656 179.445312 178.613281 179.179688 178.113281 C 178.910156 177.613281 178.667969 177.101562 178.453125 176.578125 C 178.234375 176.054688 178.046875 175.523438 177.882812 174.980469 C 177.714844 174.441406 177.578125 173.890625 177.46875 173.335938 C 177.359375 172.78125 177.273438 172.21875 177.21875 171.65625 C 177.164062 171.09375 177.136719 170.527344 177.136719 169.960938 Z" />
      <path d="M 272.257812 169.960938 C 272.257812 170.527344 272.230469 171.09375 272.175781 171.65625 C 272.117188 172.21875 272.035156 172.78125 271.925781 173.335938 C 271.8125 173.890625 271.675781 174.441406 271.511719 174.980469 C 271.347656 175.523438 271.15625 176.054688 270.941406 176.578125 C 270.722656 177.101562 270.480469 177.613281 270.214844 178.113281 C 269.949219 178.613281 269.65625 179.097656 269.34375 179.570312 C 269.027344 180.039062 268.691406 180.496094 268.332031 180.933594 C 267.972656 181.371094 267.59375 181.789062 267.191406 182.191406 C 266.792969 182.589844 266.371094 182.972656 265.933594 183.332031 C 265.496094 183.691406 265.042969 184.027344 264.570312 184.339844 C 264.101562 184.65625 263.613281 184.945312 263.113281 185.214844 C 262.617188 185.480469 262.105469 185.722656 261.582031 185.941406 C 261.058594 186.15625 260.523438 186.347656 259.984375 186.511719 C 259.441406 186.675781 258.890625 186.8125 258.335938 186.925781 C 257.78125 187.035156 257.222656 187.117188 256.65625 187.171875 C 256.09375 187.226562 255.527344 187.257812 254.960938 187.257812 C 254.394531 187.257812 253.832031 187.226562 253.265625 187.171875 C 252.703125 187.117188 252.144531 187.035156 251.589844 186.925781 C 251.03125 186.8125 250.484375 186.675781 249.941406 186.511719 C 249.398438 186.347656 248.867188 186.15625 248.34375 185.941406 C 247.820312 185.722656 247.308594 185.480469 246.808594 185.214844 C 246.308594 184.945312 245.824219 184.65625 245.355469 184.339844 C 244.882812 184.027344 244.429688 183.691406 243.992188 183.332031 C 243.554688 182.972656 243.132812 182.589844 242.734375 182.191406 Z" />
    </svg>
  );

  return (
    <button
      onClick={onReadAloud}
      className={buttonClasses}
      disabled={disabled}
      aria-label={isSpeaking ? "Stop reading" : "Read aloud"}
    >
      {SpeechIcon}
      <span className="text-white font-bold mt-1 text-[11pt]">Read Aloud</span>
    </button>
  );
};

export default ReadAloudButton;